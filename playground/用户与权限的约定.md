# 用户与权限的管理

我们的用户和权限将会是非常简单的，可以很快地自己实现而不需要什么框架，毕竟它们对这个项目来说太复杂了反而难以使用。

## 用户的定义

由于我们的用户将既来自普通的web又有来自微信的可能性，用户的唯一识别将包括UID，邮箱和微信openid。  
UID应当是唯一的，不可修改的。  
登陆的两种方式是邮箱和微信，这意味着用户必须有一个邮箱或者openid，可以都有但不需要都有。  
邮箱必须伴随一个或多个鉴权信息项可用。  
此外用户需要一个不保证唯一的但必须存在的nickname。  
用户还应当有一个权限值。  
其他的信息可以任意约定。

## web登陆规范

基于设计一个安全的系统我们就能说我们安全性不错并吹个逼这点，web登陆还是要安全性的。  
SSL什么的再说，至少密码的算法来一个够用的。  
为了保证易用性不会使用过于复杂的方式。  
密码的哈希值为

	SHA256(统一盐+密码+登陆邮箱)

这并不怎么特别安全但是够用了。

## 权限值

我们并不需要特别强大的权限系统因为这个系统确实没那么复杂。
每个用户会被赋予一个权限值，这就够用了。
目前所构想的如下

	0:non-User
	100:common-User
	200:Live host
	300:admin

admin能够查看修改其他用户的权限值。每个用户都能查看自己当前的权限。

0 可以查看用户个人主页、直播列表，但无法进入直播间
删除live只能由admin进行（防止删live跑路）